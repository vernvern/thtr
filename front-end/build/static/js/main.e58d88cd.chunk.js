(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{170:function(e,t,a){},174:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(61),l=a.n(c),s=a(180),o=a(182),i=a(181),d=a(179),m=a(16),u=a(8),h=a(9),p=a(12),b=a(10),g=a(11),v=a(3),f=a(17),E=a(14),w=a.n(E);function k(){var e=Object(f.a)(["\n  mutation register($nickName: String, $email: String, $password: String, $description: String){\n    registerUser(email:$email, password: $password, nickName: $nickName, description: $description){\n      user{\n        email\n      }\n      code,\n      msg\n    }\n  }\n"]);return k=function(){return e},e}var C=w()(k()),O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={nickName:"",email:"",password1:"",password2:"",code:""},a.nickNameChange=a.nickNameChange.bind(Object(v.a)(Object(v.a)(a))),a.emailChange=a.emailChange.bind(Object(v.a)(Object(v.a)(a))),a.password1Change=a.password1Change.bind(Object(v.a)(Object(v.a)(a))),a.password2Change=a.password2Change.bind(Object(v.a)(Object(v.a)(a))),a.descriptionChange=a.descriptionChange.bind(Object(v.a)(Object(v.a)(a))),a.setCode=a.setCode.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"nickNameChange",value:function(e){this.setState({nickName:e.target.value})}},{key:"emailChange",value:function(e){this.setState({email:e.target.value})}},{key:"password1Change",value:function(e){this.setState({password1:e.target.value})}},{key:"password2Change",value:function(e){this.setState({password2:e.target.value})}},{key:"descriptionChange",value:function(e){this.setState({description:e.target.value})}},{key:"setCode",value:function(e){this.setState({code:e})}},{key:"render",value:function(){var e=this;if("0"===this.state.code)return r.a.createElement(d.a,{to:"/login"});var t="";switch(this.state.code){case"2001":t="\u4e24\u4e2a\u5bc6\u7801\u4e0d\u4e00\u81f4";break;case"2002":t="\u8bf7\u586b\u5199\u6635\u79f0";break;case"2003":t="\u8bf7\u586b\u5199\u90ae\u7bb1";break;case"2004":t="\u8bf7\u586b\u5199\u5bc6\u7801";break;case"2005":t="\u8bf7\u518d\u6b21\u586b\u5199\u5bc6\u7801";break;case"2006":t="\u7f51\u7edc\u9519\u8bef";break;case"1001":t="\u8d26\u53f7\u5df2\u5b58\u5728";break;default:t=""}return r.a.createElement(m.Mutation,{mutation:C,onCompleted:function(t){e.setCode(t.registerUser.code)}},function(a,n){n.data;return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),e.state.nickName)if(e.state.email)if(e.state.password1)if(e.state.password2)if(e.state.password1!==e.state.password2)e.setState({code:"2001"});else if(e.state.description){var n={email:e.state.email,password:e.state.password1,nickName:e.state.nickName,description:e.state.description};a({variables:n})}else e.setState({code:"2006"});else e.setState({code:"2005"});else e.setState({code:"2004"});else e.setState({code:"2003"});else e.setState({code:"2002"})}},r.a.createElement("div",{className:"row flex-center"},r.a.createElement("div",{className:"sm-10 col"},r.a.createElement("h3",null," \u6ce8\u518c\uff5e "),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"nickName"},"\u6635\u79f0"),r.a.createElement("input",{type:"text",placeholder:"balabala~",id:"nickName",value:e.state.nickName,onChange:e.nickNameChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u90ae\u7bb1(\u8d26\u53f7)"),r.a.createElement("input",{type:"text",placeholder:"*****@**.com",id:"email",value:e.state.email,onChange:e.emailChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password1"},"\u5bc6\u7801"),r.a.createElement("input",{type:"password",placeholder:"\ud83d\ude48",id:"password1",value:e.state.password1,onChange:e.password1Change})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password2"},"\u518d\u6b21\u5bc6\u7801"),r.a.createElement("input",{type:"password",placeholder:"(\u2729_\u2729)",id:"password2",value:e.state.password2,onChange:e.password2Change})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u7b7e\u540d"),r.a.createElement("textarea",{placeholder:"\u5fc5\u586b!",value:e.state.description,onChange:e.descriptionChange})),r.a.createElement("button",{type:"submit"},"\u6ce8\u518c"),r.a.createElement("p",{className:"text-danger"},t))))})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var j=a(178);function N(){localStorage.removeItem("access_token"),localStorage.removeItem("expires_in")}var y=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=[r.a.createElement("h4",null,r.a.createElement(j.a,{to:"/home"}," Too Hard Too Remeber ! "))].map(function(e,t){return r.a.createElement("li",{key:t},e)}),t=[r.a.createElement(j.a,{to:"/page/add"}," \xa0+\xa0 "),r.a.createElement(j.a,{to:"/about"}," \u6211\u7684 "),r.a.createElement(j.a,{to:"/login",onClick:function(){return N()}},"\u9000\u51fa")].map(function(e,t){return r.a.createElement("li",{key:t},e)});return r.a.createElement("nav",{className:"border fixed split-nav"},r.a.createElement("div",{className:"nav-brand"},r.a.createElement("ul",{className:"inline"}," ",e," ")),r.a.createElement("div",{className:"collapsible"},r.a.createElement("input",{id:"collapsible2",type:"checkbox",name:"collapsible2"}),r.a.createElement("button",null,r.a.createElement("label",{htmlFor:"collapsible2"},r.a.createElement("div",{className:"bar1"}),r.a.createElement("div",{className:"bar2"}),r.a.createElement("div",{className:"bar3"}))),r.a.createElement("div",{className:"collapsible-body"},r.a.createElement("ul",{className:"inline"},t))))}}]),t}(n.Component),x=a(26),S=a.n(x);function $(){var e=localStorage.getItem("expires_in");return Date.parse(new Date)/1e3>e?(N(),null):localStorage.getItem("access_token")}function I(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+(t.getDate()+" ")+(t.getHours()+":")+(t.getMinutes()+":")+t.getSeconds()}function _(){var e=Object(f.a)(["\n  mutation add_word($word: String, $title: String, $content: String, $access_token: String) {\n    addWord(title:$title, word: $word, content: $content, accessToken: $access_token){\n      code,\n      msg\n    }\n  }\n"]);return _=function(){return e},e}var M=w()(_()),q=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={word:"",title:"",content:""},a.wordChange=a.wordChange.bind(Object(v.a)(Object(v.a)(a))),a.titleChange=a.titleChange.bind(Object(v.a)(Object(v.a)(a))),a.contentChange=a.contentChange.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"wordChange",value:function(e){this.setState({word:e.target.value})}},{key:"titleChange",value:function(e){this.setState({title:e.target.value})}},{key:"contentChange",value:function(e){this.setState({content:e.target.value})}},{key:"render",value:function(){var e=this;if("0"===this.state.code)return r.a.createElement(d.a,{to:"/home"});var t="";switch(this.state.code){case"2001":t="\u8bf7\u586b\u5199\u5355\u8bcd";break;case"2002":t="\u8bf7\u586b\u5199\u6807\u9898";break;case"2003":t="\u8bf7\u586b\u5199\u5185\u5bb9";break;default:t=""}return r.a.createElement(m.Mutation,{mutation:M,onCompleted:function(t){e.setState({code:t.addWord.code})}},function(a,n){n.data;return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),e.state.word)if(e.state.title)if(e.state.content){var n={title:e.state.title,word:e.state.word,content:e.state.content,access_token:$()};a({variables:n})}else e.setState({code:"2003"});else e.setState({code:"2002"});else e.setState({code:"2001"})}},r.a.createElement("div",{className:"row flex-center"},r.a.createElement("div",{className:"sm-10 col"},r.a.createElement("h3",null," \u6dfb\u52a0\u7b14\u8bb0\uff5e "),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"word"},"\u5355\u8bcd"),r.a.createElement("input",{type:"text",placeholder:"",id:"word",value:e.state.word,onChange:e.wordChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"title"},"\u6807\u9898"),r.a.createElement("input",{type:"text",placeholder:"",id:"title",value:e.state.title,onChange:e.titleChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",null,"\u5185\u5bb9"),r.a.createElement("textarea",{placeholder:"",value:e.state.content,onChange:e.contentChange})),r.a.createElement(S.a,{source:"# "+e.state.title+"\n"+e.state.content}),r.a.createElement("button",{type:"submit"},"\u4fdd\u5b58"),r.a.createElement("p",{className:"text-danger"},t))))})}}]),t}(n.Component);function T(){var e=Object(f.a)(["\n  query word_list_query($index: Int, $size: Int, $accessToken: String){\n    words(index:$index, size:$size, accessToken: $accessToken){\n      words{\n        id,\n        word,\n        title,\n        dateModified\n      }\n      total,\n      code,\n      msg\n    }\n  }\n"]);return T=function(){return e},e}var D=w()(T()),F=function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this,t=this.props.data.words;if(!t|"{}"===JSON.stringify(t))return r.a.createElement("div",null);var a=t.total/this.props.size,n=this.props.index;return r.a.createElement("div",null,r.a.createElement("ul",null,t.words.map(function(e){var t=e.id,a=e.word,n=e.title,c=e.dateModified;return r.a.createElement("li",{key:t},r.a.createElement(j.a,{to:"/page/detail/"+t},a+" "+n+" "+I(c).slice(0,10)))})),r.a.createElement("div",null,r.a.createElement("button",{className:"btn-small",onClick:this.props.setIndex,value:this.props.index-1,disabled:n-1<1},"<<"),Array.from({length:Math.ceil(a)},function(t,a){return r.a.createElement("button",{className:"btn-small",key:a,onClick:e.props.setIndex,value:a+1},a+1)}),r.a.createElement("button",{className:"btn-small",onClick:this.props.setIndex,value:this.props.index-1,disabled:n+1>a},">>")))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={index:1,size:10},a.setIndex=a.setIndex.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"setIndex",value:function(e){this.setState({index:e.target.value})}},{key:"render",value:function(){var e=$(),t={index:this.state.index,size:this.state.size,accessToken:e},a=Object(m.graphql)(D,{options:{variables:t,fetchPolicy:"network-only"}})(F);return r.a.createElement(a,{setIndex:this.setIndex,index:this.state.index,size:this.state.size})}}]),t}(n.Component),A={graphql_uri:"http://192.168.56.235/graphql"},W=new(a(70).a)({uri:A.graphql_uri});function J(){var e=Object(f.a)(["\n  query word_detail_query($wordId: String, $accessToken: String){\n    word(wordId: $wordId, accessToken: $accessToken){\n      title,\n      content,\n      isAuthor,\n      dateModified,\n      code\n    }\n  }\n"]);return J=function(){return e},e}function R(){var e=Object(f.a)(["\n  mutation editWord($wordId: String, $title: String, $content: String, $access_token: String) {\n    editWord(title:$title, wordId: $wordId, content: $content, accessToken: $access_token){\n      code,\n      dateModified,\n      msg\n    }\n  }\n"]);return R=function(){return e},e}var B={textAlign:"center"},H={content:"",height:"100%",display:"inline-block",verticalAlign:"middle",borderRight:"1px solid black"},P=w()(R()),U=w()(J()),L=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={title:"",content:"",mode:"detail",dateModified:0},a.titleChange=a.titleChange.bind(Object(v.a)(Object(v.a)(a))),a.contentChange=a.contentChange.bind(Object(v.a)(Object(v.a)(a))),a.modeChange=a.modeChange.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={wordId:this.props.match.params.word_id,accessToken:$()};W.query({query:U,variables:t}).then(function(t){var a=t.data.word;e.setState({title:a.title,content:a.content,dateModified:I(a.dateModified),mode:a.isAuthor?e.state.mode:"readonly"})}).catch(function(e){return console.error(e)})}},{key:"titleChange",value:function(e){this.setState({title:e.target.value})}},{key:"contentChange",value:function(e){this.setState({content:e.target.value})}},{key:"modeChange",value:function(){this.setState({mode:"detail"===this.state.mode?"edit":"detail"})}},{key:"render",value:function(){var e=this,t=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(S.a,{source:"### "+this.state.title+"\n\n"+this.state.content}))),a=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col sm-1 col-1"},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"title:"),r.a.createElement("br",null),r.a.createElement("p",null,"content:")),r.a.createElement("div",{className:"col sm-6 col-6",style:H},r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(m.Mutation,{mutation:P,onCompleted:function(t){console.info(t),"0"===t.editWord.code&&e.setState({mode:"detail",dateModified:I(t.editWord.dateModified)})}},function(t,a){a.data;return r.a.createElement("form",{onSubmit:function(a){if(a.preventDefault(),e.state.title)if(e.state.content){var n={wordId:e.props.match.params.word_id,title:e.state.title,content:e.state.content,access_token:$()};t({variables:n})}else e.setState({code:"2001"});else e.setState({code:"2001"})}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{id:"titleInput",className:"input-block",type:"text",placeholder:"",value:e.state.title,onChange:e.titleChange}),r.a.createElement("br",null),r.a.createElement("textarea",{className:"input-block",value:e.state.content,onChange:e.contentChange}),r.a.createElement("br",null),r.a.createElement("button",{type:"submit",className:"btn-small"},"\u4fdd\u5b58")))})),r.a.createElement("div",{className:"col sm-5 col-5"},r.a.createElement(S.a,{source:"### "+this.state.title+"\n"+this.state.content}))),n=this.state.mode;return r.a.createElement("div",null,r.a.createElement("div",{className:"text-center",style:B},r.a.createElement("h2",null,"test")),r.a.createElement("div",{className:"row flex-right"},r.a.createElement("p",{className:"text-muted"},"last modified: ",this.state.dateModified)),r.a.createElement("button",{className:"btn-small",onClick:this.modeChange,hidden:"readonly"===n}," ","edit"===n?"detail":"edit"," "),"edit"===n?a:t)}}]),t}(n.Component),Y=(a(170),function(e){function t(){return Object(u.a)(this,t),Object(p.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"row site"},r.a.createElement("div",{className:"sm-12 md-12 col"},r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"row"}," ",r.a.createElement(y,null)," "),r.a.createElement("div",{className:"Main row"},r.a.createElement("div",{className:"md-10 col"}),r.a.createElement("div",{className:"md-10 col"},r.a.createElement(i.a,{exact:!0,path:"/",component:z}),r.a.createElement(i.a,{exact:!0,path:"/home",component:z}),r.a.createElement(i.a,{exact:!0,path:"/page/add",component:q}),r.a.createElement(i.a,{path:"/page/detail/:word_id",component:L}))))))}}]),t}(n.Component)),G=a(43),K=a.n(G),Q=a(68),V=a(69),X=a.n(V);function Z(){var e=Object(f.a)(["\n  query login_query($email: String, $password: String){\n    login(email: $email, password: $password){\n      accessToken,\n      expiresIn,\n      code,\n      msg\n    }\n  }\n"]);return Z=function(){return e},e}var ee=w()(Z()),te=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).setCode=function(e){return a.setState(function(){return{code:e}})},a.state={email:"",password:"",code:""},a.emailChange=a.emailChange.bind(Object(v.a)(Object(v.a)(a))),a.passwordChange=a.passwordChange.bind(Object(v.a)(Object(v.a)(a))),a.setCode=a.setCode.bind(Object(v.a)(Object(v.a)(a))),a}return Object(g.a)(t,e),Object(h.a)(t,[{key:"emailChange",value:function(e){this.setState({email:e.target.value})}},{key:"passwordChange",value:function(e){this.setState({password:e.target.value})}},{key:"render",value:function(){var e=this;if("0"===this.state.code)return r.a.createElement(d.a,{to:"/home"});var t="";switch(this.state.code){case"1002":t="\u8d26\u53f7\u4e0d\u5b58\u5728";break;case"1003":t="\u5bc6\u7801\u9519\u8bef";break;case"2001":t="\u8bf7\u586b\u5199\u8d26\u53f7";break;case"2002":t="\u8bf7\u586b\u5199\u5bc6\u7801";break;default:t=""}return r.a.createElement("div",{id:"login"},r.a.createElement("div",{className:"row flex-center"},r.a.createElement("div",{className:""},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sm-12 col"},r.a.createElement("img",{src:X.a,alt:"logo"}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"sm-12 col"},r.a.createElement("p",{style:{textAlign:"center"}}," Sign in to thtr "))),r.a.createElement("div",{className:"row flex-space child-borders"},r.a.createElement("div",{className:"sm-12 md-12 col padding-left-large"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"email"},"\u8d26\u53f7"),r.a.createElement("input",{type:"text",className:"border border-primary",placeholder:"\u90ae\u7bb1 | \u8d26\u53f7",id:"email",value:this.state.email,onChange:this.emailChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"password"},"\u5bc6\u7801"),r.a.createElement("input",{type:"password",className:"border border-primary",placeholder:"\ud83d\ude48",id:"password",value:this.state.password,onChange:this.passwordChange})),r.a.createElement("div",{className:"form-group"},r.a.createElement(m.ApolloConsumer,null,function(t){return r.a.createElement("button",{type:"submit",className:"btn-block",onClick:Object(Q.a)(K.a.mark(function a(){var n,r;return K.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e.state.email){a.next=4;break}e.setCode("2001"),a.next=14;break;case 4:if(e.state.password){a.next=8;break}e.setCode("2002"),a.next=14;break;case 8:return a.next=10,t.query({query:ee,variables:{email:e.state.email,password:e.state.password}});case 10:n=a.sent,"0"===(r=n.data).login.code&&(localStorage.setItem("access_token",r.login.accessToken),localStorage.setItem("expires_in",r.login.expiresIn)),e.setCode(r.login.code);case 14:case"end":return a.stop()}},a,this)}))},"\u767b\u5f55")}),r.a.createElement("p",{className:"text-danger"},t)))),r.a.createElement("div",{className:"row flex-space child-borders"},r.a.createElement("div",{className:"sm-12 col padding-smal"},r.a.createElement("p",null,"\u6ca1\u6709thtr\u8d26\u53f7\uff1f",r.a.createElement(j.a,{to:"/register",style:{color:"#0066CC",textDecorationColor:"#ffffff",textDecorationLine:"underline",textDecorationStyle:"solid"}},"\u6ce8\u518c\u4e00\u4e2a")))))))}}]),t}(n.Component),ae="pushState"in window.history;l.a.render(r.a.createElement(function(){return r.a.createElement(m.ApolloProvider,{client:W},r.a.createElement(s.a,{forceRefresh:!ae},r.a.createElement(o.a,null,r.a.createElement(i.a,{path:"/login",render:function(e){return $()?r.a.createElement(d.a,{to:"/"}):r.a.createElement(te,null)}}),r.a.createElement(i.a,{exact:!0,path:"/register",render:function(e){return $()?r.a.createElement(d.a,{to:"/"}):r.a.createElement(O,null)}}),r.a.createElement(i.a,{path:"/",render:function(e){return $()?r.a.createElement(Y,null):r.a.createElement(d.a,{to:"/login"})}}))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},69:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},72:function(e,t,a){e.exports=a(174)}},[[72,2,1]]]);
//# sourceMappingURL=main.e58d88cd.chunk.js.map